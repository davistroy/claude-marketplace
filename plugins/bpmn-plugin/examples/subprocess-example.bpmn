<?xml version="1.0" encoding="UTF-8"?>
<!--
  Subprocess Example - Employee Onboarding Process

  Description: An employee onboarding process with an embedded subprocess
  for IT setup and a non-interrupting event subprocess for handling questions.

  Flow:
  New Hire Started → Create Employee Record → [IT Setup Subprocess] → Complete Orientation → End

  IT Setup Subprocess:
  Start → Create Email Account → Setup Workstation → Grant System Access → End

  Event Subprocess (non-interrupting):
  Question Received → Answer Question → End

  Elements:
  - 1 Start Event
  - 3 Tasks (main process)
  - 1 Embedded Subprocess (with 4 internal tasks)
  - 1 Event Subprocess (non-interrupting)
  - Boundary Timer Event (reminder)
  - 1 End Event
-->
<bpmn:definitions
    xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL"
    xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
    xmlns:dc="http://www.omg.org/spec/DD/20100524/DC"
    xmlns:di="http://www.omg.org/spec/DD/20100524/DI"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    id="Definitions_Onboarding"
    targetNamespace="http://bpmn.io/schema/bpmn"
    exporter="Claude BPMN Generator"
    exporterVersion="1.0">

    <bpmn:process id="Process_EmployeeOnboarding" name="Employee Onboarding Process" isExecutable="true">

        <!-- ============ MAIN PROCESS START ============ -->
        <bpmn:startEvent id="StartEvent_NewHire" name="New Hire Started">
            <bpmn:outgoing>Flow_Start_CreateRecord</bpmn:outgoing>
        </bpmn:startEvent>

        <bpmn:userTask id="Activity_CreateEmployeeRecord" name="Create Employee Record">
            <bpmn:incoming>Flow_Start_CreateRecord</bpmn:incoming>
            <bpmn:outgoing>Flow_Record_ITSetup</bpmn:outgoing>
        </bpmn:userTask>

        <!-- ============ EMBEDDED SUBPROCESS: IT SETUP ============ -->
        <bpmn:subProcess id="SubProcess_ITSetup" name="IT Setup">
            <bpmn:incoming>Flow_Record_ITSetup</bpmn:incoming>
            <bpmn:outgoing>Flow_ITSetup_Orientation</bpmn:outgoing>

            <!-- Subprocess Start -->
            <bpmn:startEvent id="SubStart_ITSetup" name="Start IT Setup">
                <bpmn:outgoing>SubFlow_Start_Email</bpmn:outgoing>
            </bpmn:startEvent>

            <!-- Subprocess Tasks -->
            <bpmn:serviceTask id="SubActivity_CreateEmail" name="Create Email Account">
                <bpmn:incoming>SubFlow_Start_Email</bpmn:incoming>
                <bpmn:outgoing>SubFlow_Email_Workstation</bpmn:outgoing>
            </bpmn:serviceTask>

            <bpmn:manualTask id="SubActivity_SetupWorkstation" name="Setup Workstation">
                <bpmn:incoming>SubFlow_Email_Workstation</bpmn:incoming>
                <bpmn:outgoing>SubFlow_Workstation_Access</bpmn:outgoing>
            </bpmn:manualTask>

            <bpmn:serviceTask id="SubActivity_GrantAccess" name="Grant System Access">
                <bpmn:incoming>SubFlow_Workstation_Access</bpmn:incoming>
                <bpmn:outgoing>SubFlow_Access_End</bpmn:outgoing>
            </bpmn:serviceTask>

            <!-- Subprocess End -->
            <bpmn:endEvent id="SubEnd_ITSetup" name="IT Setup Complete">
                <bpmn:incoming>SubFlow_Access_End</bpmn:incoming>
            </bpmn:endEvent>

            <!-- Subprocess Sequence Flows -->
            <bpmn:sequenceFlow id="SubFlow_Start_Email" sourceRef="SubStart_ITSetup" targetRef="SubActivity_CreateEmail"/>
            <bpmn:sequenceFlow id="SubFlow_Email_Workstation" sourceRef="SubActivity_CreateEmail" targetRef="SubActivity_SetupWorkstation"/>
            <bpmn:sequenceFlow id="SubFlow_Workstation_Access" sourceRef="SubActivity_SetupWorkstation" targetRef="SubActivity_GrantAccess"/>
            <bpmn:sequenceFlow id="SubFlow_Access_End" sourceRef="SubActivity_GrantAccess" targetRef="SubEnd_ITSetup"/>
        </bpmn:subProcess>

        <!-- Boundary Timer Event (Non-Interrupting Reminder) -->
        <bpmn:boundaryEvent id="BoundaryEvent_Reminder" name="Daily Reminder" attachedToRef="SubProcess_ITSetup" cancelActivity="false">
            <bpmn:outgoing>Flow_Reminder_SendReminder</bpmn:outgoing>
            <bpmn:timerEventDefinition id="TimerEventDef_Reminder">
                <bpmn:timeCycle xsi:type="bpmn:tFormalExpression">R/P1D</bpmn:timeCycle>
            </bpmn:timerEventDefinition>
        </bpmn:boundaryEvent>

        <bpmn:sendTask id="Activity_SendReminder" name="Send Progress Reminder">
            <bpmn:incoming>Flow_Reminder_SendReminder</bpmn:incoming>
            <bpmn:outgoing>Flow_Reminder_End</bpmn:outgoing>
        </bpmn:sendTask>

        <bpmn:endEvent id="EndEvent_ReminderSent" name="Reminder Sent">
            <bpmn:incoming>Flow_Reminder_End</bpmn:incoming>
        </bpmn:endEvent>

        <!-- ============ MAIN PROCESS CONTINUES ============ -->
        <bpmn:userTask id="Activity_CompleteOrientation" name="Complete Orientation">
            <bpmn:incoming>Flow_ITSetup_Orientation</bpmn:incoming>
            <bpmn:outgoing>Flow_Orientation_End</bpmn:outgoing>
        </bpmn:userTask>

        <bpmn:endEvent id="EndEvent_OnboardingComplete" name="Onboarding Complete">
            <bpmn:incoming>Flow_Orientation_End</bpmn:incoming>
        </bpmn:endEvent>

        <!-- ============ EVENT SUBPROCESS: HANDLE QUESTIONS ============ -->
        <bpmn:subProcess id="EventSubProcess_Questions" name="Handle Questions" triggeredByEvent="true">

            <!-- Non-interrupting Message Start -->
            <bpmn:startEvent id="EventSubStart_Question" name="Question Received" isInterrupting="false">
                <bpmn:outgoing>EventSubFlow_Question_Answer</bpmn:outgoing>
                <bpmn:messageEventDefinition id="MessageEventDef_Question" messageRef="Message_Question"/>
            </bpmn:startEvent>

            <bpmn:userTask id="EventSubActivity_AnswerQuestion" name="Answer Question">
                <bpmn:incoming>EventSubFlow_Question_Answer</bpmn:incoming>
                <bpmn:outgoing>EventSubFlow_Answer_End</bpmn:outgoing>
            </bpmn:userTask>

            <bpmn:endEvent id="EventSubEnd_Answered" name="Question Answered">
                <bpmn:incoming>EventSubFlow_Answer_End</bpmn:incoming>
            </bpmn:endEvent>

            <!-- Event Subprocess Flows -->
            <bpmn:sequenceFlow id="EventSubFlow_Question_Answer" sourceRef="EventSubStart_Question" targetRef="EventSubActivity_AnswerQuestion"/>
            <bpmn:sequenceFlow id="EventSubFlow_Answer_End" sourceRef="EventSubActivity_AnswerQuestion" targetRef="EventSubEnd_Answered"/>
        </bpmn:subProcess>

        <!-- ============ MAIN PROCESS SEQUENCE FLOWS ============ -->
        <bpmn:sequenceFlow id="Flow_Start_CreateRecord" sourceRef="StartEvent_NewHire" targetRef="Activity_CreateEmployeeRecord"/>
        <bpmn:sequenceFlow id="Flow_Record_ITSetup" sourceRef="Activity_CreateEmployeeRecord" targetRef="SubProcess_ITSetup"/>
        <bpmn:sequenceFlow id="Flow_ITSetup_Orientation" sourceRef="SubProcess_ITSetup" targetRef="Activity_CompleteOrientation"/>
        <bpmn:sequenceFlow id="Flow_Orientation_End" sourceRef="Activity_CompleteOrientation" targetRef="EndEvent_OnboardingComplete"/>
        <bpmn:sequenceFlow id="Flow_Reminder_SendReminder" sourceRef="BoundaryEvent_Reminder" targetRef="Activity_SendReminder"/>
        <bpmn:sequenceFlow id="Flow_Reminder_End" sourceRef="Activity_SendReminder" targetRef="EndEvent_ReminderSent"/>

    </bpmn:process>

    <!-- Message Definition -->
    <bpmn:message id="Message_Question" name="OnboardingQuestion"/>

    <!-- ============ DIAGRAM INTERCHANGE ============ -->
    <bpmndi:BPMNDiagram id="BPMNDiagram_Onboarding">
        <bpmndi:BPMNPlane id="BPMNPlane_Onboarding" bpmnElement="Process_EmployeeOnboarding">

            <!-- Main Process Start -->
            <bpmndi:BPMNShape id="StartEvent_NewHire_di" bpmnElement="StartEvent_NewHire">
                <dc:Bounds x="152" y="192" width="36" height="36"/>
                <bpmndi:BPMNLabel>
                    <dc:Bounds x="130" y="235" width="80" height="14"/>
                </bpmndi:BPMNLabel>
            </bpmndi:BPMNShape>

            <!-- Create Employee Record -->
            <bpmndi:BPMNShape id="Activity_CreateEmployeeRecord_di" bpmnElement="Activity_CreateEmployeeRecord">
                <dc:Bounds x="240" y="170" width="100" height="80"/>
            </bpmndi:BPMNShape>

            <!-- IT Setup Subprocess (Expanded) -->
            <bpmndi:BPMNShape id="SubProcess_ITSetup_di" bpmnElement="SubProcess_ITSetup" isExpanded="true">
                <dc:Bounds x="390" y="110" width="520" height="200"/>
            </bpmndi:BPMNShape>

            <!-- Subprocess Internal Elements -->
            <bpmndi:BPMNShape id="SubStart_ITSetup_di" bpmnElement="SubStart_ITSetup">
                <dc:Bounds x="420" y="192" width="36" height="36"/>
                <bpmndi:BPMNLabel>
                    <dc:Bounds x="405" y="235" width="66" height="14"/>
                </bpmndi:BPMNLabel>
            </bpmndi:BPMNShape>

            <bpmndi:BPMNShape id="SubActivity_CreateEmail_di" bpmnElement="SubActivity_CreateEmail">
                <dc:Bounds x="490" y="170" width="100" height="80"/>
            </bpmndi:BPMNShape>

            <bpmndi:BPMNShape id="SubActivity_SetupWorkstation_di" bpmnElement="SubActivity_SetupWorkstation">
                <dc:Bounds x="620" y="170" width="100" height="80"/>
            </bpmndi:BPMNShape>

            <bpmndi:BPMNShape id="SubActivity_GrantAccess_di" bpmnElement="SubActivity_GrantAccess">
                <dc:Bounds x="750" y="170" width="100" height="80"/>
            </bpmndi:BPMNShape>

            <bpmndi:BPMNShape id="SubEnd_ITSetup_di" bpmnElement="SubEnd_ITSetup">
                <dc:Bounds x="872" y="192" width="36" height="36"/>
                <bpmndi:BPMNLabel>
                    <dc:Bounds x="849" y="235" width="82" height="14"/>
                </bpmndi:BPMNLabel>
            </bpmndi:BPMNShape>

            <!-- Boundary Timer Event -->
            <bpmndi:BPMNShape id="BoundaryEvent_Reminder_di" bpmnElement="BoundaryEvent_Reminder">
                <dc:Bounds x="622" y="292" width="36" height="36"/>
                <bpmndi:BPMNLabel>
                    <dc:Bounds x="604" y="335" width="73" height="14"/>
                </bpmndi:BPMNLabel>
            </bpmndi:BPMNShape>

            <!-- Reminder Task -->
            <bpmndi:BPMNShape id="Activity_SendReminder_di" bpmnElement="Activity_SendReminder">
                <dc:Bounds x="590" y="370" width="100" height="80"/>
            </bpmndi:BPMNShape>

            <!-- Reminder End Event -->
            <bpmndi:BPMNShape id="EndEvent_ReminderSent_di" bpmnElement="EndEvent_ReminderSent">
                <dc:Bounds x="732" y="392" width="36" height="36"/>
                <bpmndi:BPMNLabel>
                    <dc:Bounds x="712" y="435" width="76" height="14"/>
                </bpmndi:BPMNLabel>
            </bpmndi:BPMNShape>

            <!-- Complete Orientation -->
            <bpmndi:BPMNShape id="Activity_CompleteOrientation_di" bpmnElement="Activity_CompleteOrientation">
                <dc:Bounds x="960" y="170" width="100" height="80"/>
            </bpmndi:BPMNShape>

            <!-- Main End Event -->
            <bpmndi:BPMNShape id="EndEvent_OnboardingComplete_di" bpmnElement="EndEvent_OnboardingComplete">
                <dc:Bounds x="1112" y="192" width="36" height="36"/>
                <bpmndi:BPMNLabel>
                    <dc:Bounds x="1086" y="235" width="88" height="27"/>
                </bpmndi:BPMNLabel>
            </bpmndi:BPMNShape>

            <!-- Event Subprocess -->
            <bpmndi:BPMNShape id="EventSubProcess_Questions_di" bpmnElement="EventSubProcess_Questions" isExpanded="true">
                <dc:Bounds x="160" y="370" width="350" height="140"/>
            </bpmndi:BPMNShape>

            <bpmndi:BPMNShape id="EventSubStart_Question_di" bpmnElement="EventSubStart_Question">
                <dc:Bounds x="190" y="422" width="36" height="36"/>
                <bpmndi:BPMNLabel>
                    <dc:Bounds x="164" y="465" width="88" height="14"/>
                </bpmndi:BPMNLabel>
            </bpmndi:BPMNShape>

            <bpmndi:BPMNShape id="EventSubActivity_AnswerQuestion_di" bpmnElement="EventSubActivity_AnswerQuestion">
                <dc:Bounds x="270" y="400" width="100" height="80"/>
            </bpmndi:BPMNShape>

            <bpmndi:BPMNShape id="EventSubEnd_Answered_di" bpmnElement="EventSubEnd_Answered">
                <dc:Bounds x="422" y="422" width="36" height="36"/>
                <bpmndi:BPMNLabel>
                    <dc:Bounds x="396" y="465" width="88" height="27"/>
                </bpmndi:BPMNLabel>
            </bpmndi:BPMNShape>

            <!-- ============ EDGES ============ -->

            <!-- Main Process Flows -->
            <bpmndi:BPMNEdge id="Flow_Start_CreateRecord_di" bpmnElement="Flow_Start_CreateRecord">
                <di:waypoint x="188" y="210"/>
                <di:waypoint x="240" y="210"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="Flow_Record_ITSetup_di" bpmnElement="Flow_Record_ITSetup">
                <di:waypoint x="340" y="210"/>
                <di:waypoint x="390" y="210"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="Flow_ITSetup_Orientation_di" bpmnElement="Flow_ITSetup_Orientation">
                <di:waypoint x="910" y="210"/>
                <di:waypoint x="960" y="210"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="Flow_Orientation_End_di" bpmnElement="Flow_Orientation_End">
                <di:waypoint x="1060" y="210"/>
                <di:waypoint x="1112" y="210"/>
            </bpmndi:BPMNEdge>

            <!-- Subprocess Internal Flows -->
            <bpmndi:BPMNEdge id="SubFlow_Start_Email_di" bpmnElement="SubFlow_Start_Email">
                <di:waypoint x="456" y="210"/>
                <di:waypoint x="490" y="210"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="SubFlow_Email_Workstation_di" bpmnElement="SubFlow_Email_Workstation">
                <di:waypoint x="590" y="210"/>
                <di:waypoint x="620" y="210"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="SubFlow_Workstation_Access_di" bpmnElement="SubFlow_Workstation_Access">
                <di:waypoint x="720" y="210"/>
                <di:waypoint x="750" y="210"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="SubFlow_Access_End_di" bpmnElement="SubFlow_Access_End">
                <di:waypoint x="850" y="210"/>
                <di:waypoint x="872" y="210"/>
            </bpmndi:BPMNEdge>

            <!-- Boundary Event Flows -->
            <bpmndi:BPMNEdge id="Flow_Reminder_SendReminder_di" bpmnElement="Flow_Reminder_SendReminder">
                <di:waypoint x="640" y="328"/>
                <di:waypoint x="640" y="370"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="Flow_Reminder_End_di" bpmnElement="Flow_Reminder_End">
                <di:waypoint x="690" y="410"/>
                <di:waypoint x="732" y="410"/>
            </bpmndi:BPMNEdge>

            <!-- Event Subprocess Flows -->
            <bpmndi:BPMNEdge id="EventSubFlow_Question_Answer_di" bpmnElement="EventSubFlow_Question_Answer">
                <di:waypoint x="226" y="440"/>
                <di:waypoint x="270" y="440"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="EventSubFlow_Answer_End_di" bpmnElement="EventSubFlow_Answer_End">
                <di:waypoint x="370" y="440"/>
                <di:waypoint x="422" y="440"/>
            </bpmndi:BPMNEdge>

        </bpmndi:BPMNPlane>
    </bpmndi:BPMNDiagram>

</bpmn:definitions>
